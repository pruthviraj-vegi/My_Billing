{% extends "base.html" %}
{% load static %}
{% load custom_filters %}

{% block title %}
    Delete Transaction - {{ user.full_name }}
{% endblock title %}

{% block content %}
    <!-- Page Header -->
    <div class="page-header">
        <h2 class="page-title">Delete Transaction</h2>
        <div class="page-actions">
            <a href="{% url 'user:detail' user.id %}" class="btn btn-outline">
                <i class="fas fa-arrow-left"></i>
                Back to User
            </a>
        </div>
    </div>

    <!-- Breadcrumb Navigation -->
    <nav class="breadcrumb breadcrumb-right">
        <a href="{% url 'user:home' %}" class="breadcrumb-item">Users</a>
        <span class="breadcrumb-separator">/</span>
        <a href="{% url 'user:detail' user.id %}" class="breadcrumb-item">{{ user.full_name }}</a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-active">Delete Transaction</span>
    </nav>

    <!-- Delete Confirmation -->
    <div class="delete-container">
        <div class="delete-warning">
            <div class="warning-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h3>Are you sure you want to delete this transaction?</h3>
            <p class="warning-text">
                This action cannot be undone. The transaction will be permanently removed from the system.
            </p>
        </div>

        <!-- Transaction Information -->
        <div class="user-info">
            <h4>Transaction Details:</h4>
            <div class="info-grid">
                <div class="info-row">
                    <span class="info-label">Transaction ID:</span>
                    <span class="info-value">{{ transaction.transaction_id }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Type:</span>
                    <span class="info-value">
                        <span class="badge badge-{{ transaction.transaction_type|lower }}">
                            {{ transaction.get_transaction_type_display }}
                        </span>
                    </span>
                </div>
                <div class="info-row">
                    <span class="info-label">Amount:</span>
                    <span class="info-value">
                        {% if transaction.is_debit %}
                            <span class="text-danger">-₹{{ transaction.amount|floatformat:2 }}</span>
                        {% else %}
                            <span class="text-success">+₹{{ transaction.amount|floatformat:2 }}</span>
                        {% endif %}
                    </span>
                </div>
                <div class="info-row">
                    <span class="info-label">Payment Method:</span>
                    <span class="info-value">{{ transaction.get_payment_method_display }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Description:</span>
                    <span class="info-value">{{ transaction.description|default:"-" }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Reference Number:</span>
                    <span class="info-value">{{ transaction.reference_number|default:"-" }}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Created At:</span>
                    <span class="info-value">{{ transaction.created_at|date:"F d, Y \a\t g:i A" }}</span>
                </div>
            </div>
        </div>

        <!-- Important Notes -->
        <div class="important-notes">
            <h4>Important Notes:</h4>
            <ul>
                <li>This action will permanently delete the transaction record</li>
                <li>All transaction data will be lost</li>
                <li>This may affect financial reports and balances</li>
                <li>Consider editing the transaction instead if you want to modify it</li>
            </ul>
        </div>

        <!-- Delete Actions -->
        <div class="delete-actions">
            <form method="post" class="delete-form">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger">
                    <i class="fas fa-trash"></i>
                    Delete Transaction Permanently
                </button>
            </form>
            <a href="{% url 'user:detail' user.id %}" class="btn btn-outline">
                <i class="fas fa-times"></i>
                Cancel
            </a>
        </div>

        <!-- Alternative Actions -->
        <div class="alternative-actions">
            <h4>Alternative Actions:</h4>
            <div class="action-buttons">
                <a href="{% url 'user:transaction_edit' user.id transaction.id %}" class="btn btn-outline">
                    <i class="fas fa-edit"></i>
                    Edit Transaction
                </a>
            </div>
        </div>
    </div>
{% endblock content %}

