{% extends "base.html" %}
{% load static %}

{% block title %}
    Login Activity
{% endblock title %}

{% block content %}
    <div class="page-header">
        <h2 class="page-title">Login Activity</h2>
        <div class="page-actions">
            <a href="{% url 'user:home' %}" class="btn">
                <i class="fas fa-arrow-left"></i>
                Back
            </a>
        </div>
    </div>

    <nav class="breadcrumb breadcrumb-right">
        <a href="{% url 'user:home' %}" class="breadcrumb-item">Users</a>
        <span class="breadcrumb-separator">/</span>
        <span class="breadcrumb-active">Login Activity</span>
    </nav>

    <div class="table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>When</th>
                    <th>User</th>
                    <th>Event</th>
                    <th>IP</th>
                    <th>User Agent</th>
                    <th>Session</th>
                </tr>
            </thead>
            <tbody>
                {% for ev in events %}
                <tr>
                    <td>{{ ev.occurred_at|date:"Y-m-d H:i:s" }}</td>
                    <td>{{ ev.user.full_name|default:ev.user.get_username }}</td>
                    <td>{{ ev.get_event_type_display }}</td>
                    <td>{{ ev.ip_address|default:"-" }}</td>
                    <td>
                        {% if ev.user_agent %}
                          <span title="{{ ev.user_agent }}">{{ ev.user_agent|truncatechars:32 }}</span>
                        {% else %}-{% endif %}
                    </td>
                    <td><code>{{ ev.session_key|default:"-" }}</code></td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="6" class="text-center">No login activity</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}


