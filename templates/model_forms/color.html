{% load static %}
<div class="modal fade" id="new_color" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title text-center">New Color</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Simple Color Form for AJAX Modal -->
          <form method="#" id="add_new_color" class="details-form" autocomplete="off">
            {% csrf_token %}
            <!-- Form Errors -->
            {% if color_form.non_field_errors %}
              <div class="form-errors">
                {% for error in color_form.non_field_errors %}
                  <div class="error-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    {{ error }}
                  </div>
                {% endfor %}
              </div>
            {% endif %}
            <!-- Color Preview Section -->
            <div class="form-section">
              <h5 class="form-section-title">Color Preview</h5>
              <div class="color-preview-container">
                <div class="color-preview-box" id="colorPreview">
                  <div class="color-swatch" id="colorSwatch"></div>
                  <div class="color-info">
                    <span class="color-name" id="previewColorName">No color selected</span>
                    <span class="color-hex" id="previewColorHex">#FFFFFF</span>
                  </div>
                </div>
              </div>
            </div>
            <!-- Color Details Section -->
            <div class="form-section">
              <h5 class="form-section-title">Color Details</h5>
              <!-- Name Field -->
              <div class="form-group {% if color_form.name.errors %}has-error{% endif %}">
                <label for="{{ color_form.name.id_for_label }}" class="form-label">{{ color_form.name.label }}</label>
                <div class="input-with-suggestions">
                  {{ color_form.name }}
                  <div class="suggestions-dropdown" id="nameSuggestions"></div>
                </div>
                <small class="form-help">e.g., Red, Blue, Green, Black, White (or type to see suggestions)</small>
                {% if color_form.name.errors %}
                  <div class="field-errors">
                    {% for error in color_form.name.errors %}
                      <div class="error-message">
                        <i class="fas fa-exclamation-circle"></i>
                        {{ error }}
                      </div>
                    {% endfor %}
                  </div>
                {% endif %}
              </div>
              <!-- Hex Code Field -->
              <div class="form-group {% if color_form.hex_code.errors %}has-error{% endif %}">
                <label for="{{ color_form.hex_code.id_for_label }}" class="form-label">{{ color_form.hex_code.label }}</label>
                <div class="input-with-suggestions">
                  {{ color_form.hex_code }}
                  <div class="suggestions-dropdown" id="hexSuggestions"></div>
                </div>
                <small class="form-help">e.g., #FF0000, #00FF00, #0000FF (or type to see suggestions)</small>
                {% if color_form.hex_code.errors %}
                  <div class="field-errors">
                    {% for error in color_form.hex_code.errors %}
                      <div class="error-message">
                        <i class="fas fa-exclamation-circle"></i>
                        {{ error }}
                      </div>
                    {% endfor %}
                  </div>
                {% endif %}
              </div>
              <!-- Description Field -->
              {% comment %} <div class="form-group {% if form.description.errors %}has-error{% endif %}">
                <label for="{{ colors_form.description.id_for_label }}" class="form-label">{{ colors_form.description.label }}</label>
                {{ colors_form.description }}
                <small class="form-help">e.g., Bright red color, suitable for sports wear</small>
                {% if colors_form.description.errors %}
                  <div class="field-errors">
                    {% for error in colors_form.description.errors %}
                      <div class="error-message">
                        <i class="fas fa-exclamation-circle"></i>
                        {{ error }}
                      </div>
                    {% endfor %}
                  </div>
                {% endif %}
              </div> {% endcomment %}
            </div>
            <!-- Form Actions -->
            <div class="form-actions">
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-save"></i>
                  Create Color
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div> 

{% block extra_js %}
  <!-- Load external JS -->
  <script src="{% static 'js/color_form.js' %}"></script>
  <script>
    window.initialColor = {
      name: "{{ color_form.name.value|default:'' }}",
      hex: "{{ color_form.hex_code.value|default:'' }}"
    };
  </script>
  {% endblock extra_js %}